/*
	program : A warehouse management system (mini project)
	Author:	AKSHAY M KALABURGI
	Date : 20-03-2022
	purpose: a case study for warehouse mangement and project on ORACLE
--use this for creation new database user in oracle
	1- login as sys as sysdba
	2- use below code in comments
CREATE USER WAREHOUSE IDENTIFIED BY 12345;
grant sysdba to warehouse;
grant all privilege to warehouse;
grant create session to warehouse;
		3- after the TYPE
			conn warehouse press enter
			enter pass 12345
EXECTUE IN SAME SEQUENCE
*/

CREATE TABLE BIN_DETAILS ( 
	BIN_NUMBER           number(5)   ,
	WAREHOUSE_ID         varchar2(4)   ,
	BIN_CAPACITY         number   ,
	CONSTRAINT PK_BIN_DETAILS UNIQUE ( BIN_NUMBER ) 
 );
 
 INSERT INTO BIN_DETAILS VALUES(01,'WH1',100);
 INSERT INTO BIN_DETAILS VALUES(02,'WH2',50);
 INSERT INTO BIN_DETAILS VALUES(03,'WH3',70);
 
CREATE TABLE MANAGER_MASTER ( 
	MANAGER_ID           number(5)   ,
	WAREHOUSE_ID         varchar2(4)   ,
	EMPLOYEE_NUMBER      number(5)   ,
	CONSTRAINT PK_MANAGER_MAST UNIQUE ( MANAGER_ID ) ,
	CONSTRAINT UNQ_MANAGER_MAST_EMPLOYEE_NUM UNIQUE ( EMPLOYEE_NUMBER ) 
 );

 INSERT INTO MANAGER_MASTER VALUES(10101,'WH1',100);
 INSERT INTO MANAGER_MASTER VALUES(10102,'WH2',101);
 INSERT INTO MANAGER_MASTER VALUES(10103,'WH3',102);

CREATE TABLE WAREHOUSE_MASTER ( 
	WAREHOUSE_ID         varchar2(4)   ,
	WAREHOUSE_NAME       varchar2(25)   ,
	WAREHOUSE_ADDRESS    varchar2(100)   ,
	MANAGER_ID           number(5)   ,
	BIN_NUMBER           number(5)   ,
	CONSTRAINT PK_WAREHOUSE_MA UNIQUE ( WAREHOUSE_ID ) 
 );
 
 INSERT INTO WAREHOUSE_MASTER VALUES('WH1','AHWH','NANDED','10101','01');
 INSERT INTO WAREHOUSE_MASTER VALUES('WH2','SLWH','BANGLORE','10102','02');
 INSERT INTO WAREHOUSE_MASTER VALUES('WH3','AKWH','HYDERABAD','10103','03');

CREATE TABLE BATCH_MASTER ( 
	BATCH_NUMBER         number(5)   ,
	BATCH_ARRIVAL_DATE   date   ,
	MANAGER_ID           number(5)   ,
	WAREHOUSE_ID         varchar2(5)   ,
	CONSTRAINT PK_BATCH_MASTER UNIQUE ( BATCH_NUMBER ) 
 );

INSERT INTO BATCH_MASTER VALUES(01,TO_DATE('2022/03/28','yyyy/mm/dd'),10101,'WH1');
 INSERT INTO BATCH_MASTER VALUES(02,TO_DATE('2022/03/27','yyyy/mm/dd'),10102,'WH2');
 INSERT INTO BATCH_MASTER VALUES(03,TO_DATE('2022/03/26','yyyy/mm/dd'),10103,'WH3');

CREATE TABLE CURRENT_BACKORDER ( 
	PART_NUMBER          varchar2(5)   ,
	ORIGNAL_QUNTITY      number(5)   ,
	REMAINING_QUNATITY   number(5)   ,
	BACKORDER_DATE       date   ,
	MANAGER_ID           number(5)   ,
	BACKORDER_ID         number   ,
	WAREHOUSE_ID         varchar2(4)   ,
	CONSTRAINT PK_CURRENT_BACK_0 UNIQUE ( BACKORDER_ID ) 
 );

INSERT INTO CURRENT_BACKORDER VALUES('010A',100,45,'1-MAR-22','10101',999,'WH1');
INSERT INTO CURRENT_BACKORDER VALUES('010B',100,45,'1-MAR-22','10102',888,'WH2');
INSERT INTO CURRENT_BACKORDER VALUES('010C',100,45,'1-MAR-22','10103',777,'WH3');

CREATE TABLE EMPLOYEE_MASTER ( 
	FIRSTNAME            varchar2(10)   ,
	MIDDLENAME           varchar2(10)   ,
	LASTNAME             varchar2(20)   ,
	PHONENUMBER          number(9)   NOT NULL,
	SALARY               number(9,3)   ,
	JOB                  varchar2(25)   ,
	MANAGER_ID           number(5)   ,
	WAREHOUSE_ID         varchar2(4)   ,
	EMPLOYEE_NUMBER      number(5)  DEFAULT 000 ,
	CONSTRAINT PK_EMPLOYEE_MAS UNIQUE ( EMPLOYEE_NUMBER ) 
 );
 
INSERT INTO EMPLOYEE_MASTER VALUES('AVEZ','HUSSAIN','SHUAKAT',01234567,20800,'MANAGER',NULL,'WH1',100);
INSERT INTO EMPLOYEE_MASTER VALUES('LATHEESH','SAI','ERAPALLI',111111111,20800,'MANAGER',NULL,'WH2',101);
INSERT INTO EMPLOYEE_MASTER VALUES('AKSHAY','KALBURGI','AKSHAY',23456789,20800,'MANAGER',NULL,'WH3',102);
INSERT INTO EMPLOYEE_MASTER VALUES('Pavan','','Pallam',040224536,15000,'WORKER',10101,'WH1',103);
INSERT INTO EMPLOYEE_MASTER VALUES('William','','Smith',040225636,15000,'WORKER',10101,'WH1',104);
INSERT INTO EMPLOYEE_MASTER VALUES('Akbar','','Syed',040225766,15000,'WORKER',10101,'WH1',105);
INSERT INTO EMPLOYEE_MASTER VALUES('Ravi','Kiran','Soora',040243766,15000,'WORKER',10101,'WH2',106);
INSERT INTO EMPLOYEE_MASTER VALUES('Akhil','Singh','Patan',040245836,15000,'WORKER',10101,'WH2',107);
INSERT INTO EMPLOYEE_MASTER VALUES('Nancy','','Sherif',040237436,15000,'WORKER',10102,'WH2',108);
INSERT INTO EMPLOYEE_MASTER VALUES('Praneeth','Kumar','Gadam',040236536,15000,'WORKER',10103,'WH3',109);
INSERT INTO EMPLOYEE_MASTER VALUES('Alamsha','','Sheik',040238946,15000,'WORKER',10103,'WH3',110);
INSERT INTO EMPLOYEE_MASTER VALUES('Saravan','','Jha',040238946,15000,'WORKER',10103,'WH3',111);

CREATE TABLE PART_MASTER ( 
	PART_NUMBER          varchar2(5)   ,
	SUB_PART_NUMBER      varchar2(4)   ,
	ASSEMBLY_NUMBER      varchar2(4)   ,
	BATCH_NUMBER         number(5)   ,
	CONSTRAINT PK_PART_MASTER UNIQUE ( PART_NUMBER ) 
 );
 
INSERT INTO PART_MASTER VALUES('A1','A1B','ASA1',01);
 INSERT INTO PART_MASTER VALUES('A2','A2B','ASA2',01);
 INSERT INTO PART_MASTER VALUES('B1','B1B','ASB1',02);
 INSERT INTO PART_MASTER VALUES('B2','B2B','ASB2',02);
 INSERT INTO PART_MASTER VALUES('C1','C1B','ASC1',03);
 INSERT INTO PART_MASTER VALUES('C2','C2B','ASC2',03);

CREATE TABLE EMPLOYEE_ADDRESS ( 
	STREET_NUMBER        varchar2(6)   ,
	EMPLOYEE_NUMBER      number(5)   ,
	STREETNAME           varchar2(10)   ,
	CITY                 varchar2(24)   ,
	PROVINCE             varchar2(4)   
 );
 
 INSERT INTO EMPLOYEE_ADDRESS VALUES(431601,100,'NAIABADI','NANDED','MH');
INSERT INTO EMPLOYEE_ADDRESS VALUES(431602,101,'NEHRU ROAD','TIRUPATI','AP');
INSERT INTO EMPLOYEE_ADDRESS VALUES(431603,102,'UDAYNAGAR','HAVERI','KA');
INSERT INTO EMPLOYEE_ADDRESS VALUES(431604,103,'AIROLI','MUMBAI','MH');
INSERT INTO EMPLOYEE_ADDRESS VALUES(431605,104,'YOUSUFGUDA','HYDERABAD','TS');
INSERT INTO EMPLOYEE_ADDRESS VALUES(431606,105,'KATRAJ','PUNE','MH');
INSERT INTO EMPLOYEE_ADDRESS VALUES(431607,106,'MANIYUR','CHITRADURGA','KA');
INSERT INTO EMPLOYEE_ADDRESS VALUES(431608,107,'GANDHI RD','ONGOLE','AP');
INSERT INTO EMPLOYEE_ADDRESS VALUES(431609,108,'LB NAGAR','HYDERABAD','TS');
INSERT INTO EMPLOYEE_ADDRESS VALUES(431610,109,'VASHI','NAVIMUMBAI','MH');
INSERT INTO EMPLOYEE_ADDRESS VALUES(431611,110,'JPNAGAR','BANGALORE','KA');
INSERT INTO EMPLOYEE_ADDRESS VALUES(431612,111,'BENZCIRCLE','VIJAYAWADA','AP');

CREATE TABLE ITEM_MASTER ( 
	ITEM_NUMBER          varchar2(5)   ,
	PART_NUMBER          varchar2(5)   NOT NULL,
	BATCH_NUMBER         number   ,
	DATE_OUT             date   ,
	CHECK_OUT            date   ,
	BIN_NUMBER           number(5)   ,
	CONSTRAINT PK_ITEM_MASTER UNIQUE ( ITEM_NUMBER ) 
 );
 
INSERT INTO ITEM_MASTER VALUES('010A','A1',01,'31-MAR-22','31-MAR-22',01);
INSERT INTO ITEM_MASTER VALUES('010B','A2',01,'31-MAR-22','31-MAR-22',01);
INSERT INTO ITEM_MASTER VALUES('010C','B1',02,'31-MAR-22','31-MAR-22',02);
INSERT INTO ITEM_MASTER VALUES('010D','B2',02,'31-MAR-22','31-MAR-22',02);
INSERT INTO ITEM_MASTER VALUES('010E','C1',03,'31-MAR-22','31-MAR-22',03);
INSERT INTO ITEM_MASTER VALUES('010F','C2',03,'31-MAR-22','31-MAR-22',03);

ALTER TABLE BATCH_MASTER ADD CONSTRAINT FK_BATCH_IN_WAREHOUSE FOREIGN KEY ( WAREHOUSE_ID ) REFERENCES WAREHOUSE_MASTER( WAREHOUSE_ID );

ALTER TABLE BATCH_MASTER ADD CONSTRAINT FK_BATCH_MANAGER FOREIGN KEY ( MANAGER_ID ) REFERENCES MANAGER_MASTER( MANAGER_ID );

ALTER TABLE CURRENT_BACKORDER ADD CONSTRAINT FK_BACKORDER_IN_WAREHOU FOREIGN KEY ( WAREHOUSE_ID ) REFERENCES WAREHOUSE_MASTER( WAREHOUSE_ID );

ALTER TABLE CURRENT_BACKORDER ADD CONSTRAINT FK_BACKORDER_MANAGE_BY FOREIGN KEY ( MANAGER_ID ) REFERENCES MANAGER_MASTER( MANAGER_ID );

ALTER TABLE EMPLOYEE_ADDRESS ADD CONSTRAINT FK_EMPLOYEE_ADDRESSES FOREIGN KEY ( EMPLOYEE_NUMBER ) REFERENCES EMPLOYEE_MASTER( EMPLOYEE_NUMBER );

ALTER TABLE EMPLOYEE_MASTER ADD CONSTRAINT FK_EMPLOYEE_WORK_WAREHO FOREIGN KEY ( WAREHOUSE_ID ) REFERENCES WAREHOUSE_MASTER( WAREHOUSE_ID );

ALTER TABLE ITEM_MASTER ADD CONSTRAINT FK_ITEM_IN_PART FOREIGN KEY ( PART_NUMBER ) REFERENCES PART_MASTER( PART_NUMBER );

ALTER TABLE ITEM_MASTER ADD CONSTRAINT FK_ITEM_IN_BATCH FOREIGN KEY ( BATCH_NUMBER ) REFERENCES BATCH_MASTER( BATCH_NUMBER );

ALTER TABLE ITEM_MASTER ADD CONSTRAINT FK_ITEM_IN_BIN_DET FOREIGN KEY ( BIN_NUMBER ) REFERENCES BIN_DETAILS( BIN_NUMBER );

ALTER TABLE PART_MASTER ADD CONSTRAINT FK_PART_FROM_BATCH FOREIGN KEY ( BATCH_NUMBER ) REFERENCES BATCH_MASTER( BATCH_NUMBER );

ALTER TABLE WAREHOUSE_MASTER ADD CONSTRAINT FK_WAREHOUSE_MANAGER FOREIGN KEY ( MANAGER_ID ) REFERENCES MANAGER_MASTER( MANAGER_ID );

ALTER TABLE WAREHOUSE_MASTER ADD CONSTRAINT FK_WAREHOUSE_HAVE_BIN FOREIGN KEY ( BIN_NUMBER ) REFERENCES BIN_DETAILS( BIN_NUMBER );

COMMENT ON COLUMN WAREHOUSE_MASTER.WAREHOUSE_ID IS 'warehouse id is prmariey key';
